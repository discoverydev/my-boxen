# default profile

# boxen environment
source /opt/boxen/env.sh

# genymotion
genymotion_version=`ls -l "/opt/homebrew-cask/Caskroom/genymotion" | grep "^d" | rev | cut -d " " -f 1 | rev | tail -n 1`
export GENYMOTION_HOME=/opt/homebrew-cask/Caskroom/genymotion/$genymotion_version

# android home
export ANDROID_HOME=/opt/android-sdk
export PATH=$ANDROID_HOME/tools:$ANDROID_HOME/platform-tools:$GENYMOTION_HOME/Genymotion.app/Contents/MacOS:$GENYMOTION_HOME/Genymotion\ Shell.app/Contents/MacOS:$PATH

# aliases
alias ll="ls -ltra"
alias repo="cd /opt/boxen/repo"
alias boxen="cd /opt/boxen/repo"
alias shared="cd /Users/Shared"
alias data="cd /Users/Shared/data"
alias src="cd ~/src"
alias mls="cd ~/src/mls-dev"
alias sc="cd ~/src/sc-dev"
alias ..="cd .."
alias k="cd .."
alias sourcetree="open -a /Applications/Sourcetree.app"
alias dm="docker-machine"
alias source-profile="source /Users/ga-mlsdiscovery/.profile"
alias lip="localip"
# This command will unlock the user keychain without requiring user interaction, which means you can do pretty much anything over ssh"
alias unlock="security unlock-keychain"
alias untar="tar -xvzf'

function docker-sh {
    if [[ -z "$1" ]]; then
        echo "Usage: docker-sh <container-name>"
        return 1
    fi
    docker exec -it "$1" /bin/sh
}

function post-json {
    if [[ -z "$1" || -z "$2" ]]; then
        echo "Usage: post-json <json string> <address>"
        return 1
    fi
    curl -i -H "Content-Type: application/json" -X POST -d "$1" "$2"
}

function localip {
    ifconfig | grep 192 | cut -d ' ' -f 2
} 

function init-boxen-repo { 
    sudo mkdir -p /opt/boxen
    sudo chown -R ga-mlsdiscovery:staff /opt
    git clone https://github.com/discoverydev/my-boxen /opt/boxen/repo
    cd /opt/boxen/repo
}

function setup-prompt { 
    export PS1="\h:\W \$ "
}

# GIT aliases
alias pull='git pull'
alias pullrecurse='find . -type d -name .git -exec sh -c "cd \"{}\"/../ && pwd && git pull" \;'
alias push='git push'
alias rh='git reset --hard'
alias ads='git checkout ads'
alias st='git status'
alias log="clear; git log -20 --graph --all --format=format:'%C(bold blue)%h%C(reset) - %C(bold green)(%ar)%C(reset) %C(white)%s%C(reset) %C(bold white)â€” %an%C(reset)%C(bold yellow)%d%C(reset)' --abbrev-commit --date=relative"
alias log2="clear; git log -20 --format='%Cgreen%h%Creset %C(cyan)%an%Creset - %s' --graph --date=relative --abbrev-commit"
alias br='git branch'
alias ac='git add .; git commit -a '
alias mrg='git merge --no-ff'
alias gtree='git log --oneline --decorate --all --graph'

if [ -f $(brew --prefix)/etc/bash_completion ]; then
    source $(brew --prefix)/etc/bash_completion
fi

source /Users/ga-mlsdiscovery/.git-completion.bash
source /Users/ga-mlsdiscovery/.docker-completion.bash
source /Users/ga-mlsdiscovery/.docker-machine-completion.bash
